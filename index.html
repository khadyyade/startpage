<!-- Este archivo contiene la estructura HTML de la página de inicio, incluyendo la barra de búsqueda, el reloj y los botones de control. -->

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nueva pestaña</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Exo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" href="dolphin.png" type="image/x-icon">
    <meta name="theme-color" content="#808080"> <!-- Set the theme color to gray -->
</head>
<body>
    <!-- Contenedor de la barra de búsqueda -->
    <div class="container">
        <input type="text" id="search" placeholder="Buscar...">
        <div class="icon" onclick="search()"></div>
    </div>
    <!-- Contenedor del reloj izquierdo -->
    <div id="clockContainerWrapper" class="left">
        <div id="clockContainer">
            <div id="hour"></div>
            <div id="minute"></div>
            <div id="date"></div>
        </div>
    </div>
    <!-- Contenedor del reloj derecho -->
    <div id="clockContainerWrapper" class="right">
        <div id="clockContainer">
            <div id="hour"></div>
            <div id="minute"></div>
            <div id="date"></div>
        </div>
    </div>
    <!-- Pulpi -->
    <div id="mascota">
        <img id="pulpito" src="octopus-svgrepo-com.svg" alt="Pulpo">
        <div id="burbuja">Hola, soy Pulpi. ¿Te puedo ayudar en algo?</div>
    </div>        
    <!-- Botón de reinicio -->
    <button id="reset-button" onclick="resetBubbles()">
        <img src="actualizar.png" alt="Reset">
    </button>
    <!-- Botón para pausar/continuar animaciones -->
    <button id="toggle-animations-button" onclick="toggleAnimations()">
        <img src="pausar.png" alt="Toggle Animations">
    </button>
    <!-- Botón para cambiar el fondo -->
    <button id="change-background-button" onclick="changeBackground()">
        <img src="galeria.png" alt="Change Background">
    </button>
    <!-- Botón para añadir una burbuja -->
    <button id="add-bubble-button" onclick="openAddBubbleWindow()">
        <img src="mas.png" alt="Add Bubble">
    </button>
    <!-- Botón para reiniciar las burbujas -->
    <button id="resetBubbles" onclick="initBubble()">
        <img src="aleatorio.png" alt="Restart">
    </button>
    <!-- Input para subir una imagen de fondo -->
    <input type="file" id="backgroundImageInput" accept="image/*" style="display: none;" onchange="uploadBackground()">
    <!-- Ventana para añadir una burbuja -->
    <div class="add-bubble-window" id="addBubbleWindow">
        <button class="close-button" onclick="closeAddBubbleWindow()">×</button>
        <input type="text" id="bubbleName" placeholder="Nombre de la burbuja">
        <input type="text" id="bubbleLink" placeholder="Hiperenlace">
        <input type="color" id="bubbleColor" value="#ff0000">
        <input type="file" id="bubbleImage" accept="image/*">
        <button class="round-button" onclick="addBubble()">
            <img src="mas.png" alt="Add Bubble">
        </button>
    </div>
    <!-- Scripts de animaciones y reloj -->
    <script src="animations.js"></script>
    <script src="clock.js"></script>
    <script>
        const backgrounds = ['fondo1.jpg', 'fondo2.jpg', 'fondo3.png', 'fondo4.png', 'fondo5.jpg'];
        const backgroundsMobil = ['fondoM1.jpg', 'fondoM2.jpg', 'fondoM3.jpg', 'fondoM4.jpg', 'fondoM5.jpg'];

        function preloadImages(images) {
            images.forEach(image => {
                const img = new Image();
                img.src = image;
            });
        }

        document.addEventListener("DOMContentLoaded", function() {
            const isMobile = window.innerWidth <= 768;
            preloadImages(isMobile ? backgroundsMobil : backgrounds);
            document.getElementById("search").focus();
            loadInitialBackground(isMobile); // Ensure the background is set correctly on load
        });

        function loadInitialBackground(isMobile) {
            if (isMobile) {
                document.body.style.backgroundImage = `url('fondoM1.jpg')`;
            } else {
                document.body.style.backgroundImage = `url('${backgrounds[0]}')`;
            }
        }

        // Cerrar la ventana de añadir burbuja al presionar la tecla Escape
        document.addEventListener("keydown", function(event) {
            if (event.key === "Escape") {
                closeAddBubbleWindow();
            }
        });
    </script>
    <script src="mascota.js"></script>
</body>
</html>